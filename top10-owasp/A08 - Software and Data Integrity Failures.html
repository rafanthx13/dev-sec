<!DOCTYPE html>
<html>
<head>
<title>A08 - Software and Data Integrity Failures.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="a08---software-and-data-integrity-failures">A08 - Software and Data Integrity Failures</h1>
<h2 id="resumo">Resumo</h2>
<p>Uma falha de integridade ocorre quando algo √© modificado de forma maliciosa sem que ningu√©m perceba. A falha mais comum acontece ao utilizar depend√™ncias de terceiros, como bibliotecas (libs) e o processo de CI/CD (Integra√ß√£o Cont√≠nua/Entrega Cont√≠nua). Se voc√™ baixar uma biblioteca no dia X e, em uma atualiza√ß√£o futura (dia N), essa biblioteca n√£o for proveniente de uma fonte confi√°vel, ela pode conter c√≥digo malicioso capaz de roubar seus dados. Um pipeline de CI/CD inseguro pode se tornar uma porta dos fundos (backdoor): mesmo que seu c√≥digo esteja correto, a vers√£o de produ√ß√£o pode ser adulterada com um backdoor. Portanto, √© necess√°rio ter maior cuidado ao atualizar depend√™ncias e garantir a integridade do pipeline de CI/CD, al√©m de verificar quem realmente tem permiss√£o para alter√°-lo.</p>
<h2 id="links">Links</h2>
<ul>
<li>https://medium.com/@madhuhack01/owasp-top-10-a08-2021-owasp-top-10-a08-2021-software-and-data-integrity-failures-df5ab1396f5e</li>
</ul>
<h2 id="owasp">OWASP</h2>
<h3 id="descri%C3%A7%C3%A3o">Descri√ß√£o</h3>
<p>Falhas na integridade de software e dados est√£o relacionadas a c√≥digo e infraestrutura que n√£o protegem contra viola√ß√µes de integridade. Um exemplo disso √© quando um aplicativo depende de plugins, bibliotecas ou m√≥dulos de fontes, reposit√≥rios e redes de entrega de conte√∫do (CDNs) n√£o confi√°veis. Um pipeline de CI/CD inseguro pode introduzir a possibilidade de acesso n√£o autorizado, c√≥digo malicioso ou comprometimento do sistema. Por √∫ltimo, muitos aplicativos agora incluem funcionalidade de atualiza√ß√£o autom√°tica, onde as atualiza√ß√µes s√£o baixadas sem verifica√ß√£o de integridade suficiente e aplicadas ao aplicativo previamente confi√°vel. Atacantes podem potencialmente fazer upload de suas pr√≥prias atualiza√ß√µes para serem distribu√≠das e executadas em todas as instala√ß√µes. Outro exemplo √© quando objetos ou dados s√£o codificados ou serializados em uma estrutura que um atacante pode ver e modificar, o que torna a deserializa√ß√£o insegura.</p>
<h3 id="como-previinir">Como previinir</h3>
<ul>
<li>
<p>Use assinaturas digitais ou mecanismos similares para verificar se o software ou os dados s√£o provenientes da fonte esperada e n√£o foram alterados.</p>
</li>
<li>
<p>Certifique-se de que as bibliotecas e depend√™ncias, como npm ou Maven, est√£o consumindo reposit√≥rios confi√°veis. Se voc√™ tiver um perfil de risco mais alto, considere hospedar um reposit√≥rio interno conhecido como bom que foi examinado.</p>
</li>
<li>
<p>Certifique-se de que uma ferramenta de seguran√ßa da cadeia de suprimentos de software, como OWASP Dependency Check ou OWASP CycloneDX, √© usada para verificar se os componentes n√£o cont√™m vulnerabilidades conhecidas.</p>
</li>
<li>
<p>Certifique-se de que haja um processo de revis√£o para mudan√ßas de c√≥digo e configura√ß√£o para minimizar a chance de que c√≥digo ou configura√ß√£o maliciosos possam ser introduzidos no seu pipeline de software.</p>
</li>
<li>
<p>Certifique-se de que seu pipeline de CI/CD tenha uma segrega√ß√£o adequada, configura√ß√£o e controle de acesso para garantir a integridade do c√≥digo que flui atrav√©s dos processos de constru√ß√£o e implanta√ß√£o.</p>
</li>
<li>
<p>Certifique-se de que dados serializados n√£o assinados ou n√£o criptografados n√£o sejam enviados a clientes n√£o confi√°veis sem algum tipo de verifica√ß√£o de integridade ou assinatura digital para detectar adultera√ß√£o ou retransmiss√£o dos dados serializados.</p>
</li>
</ul>
<h2 id="referencias-do-owap">Referencias do owap</h2>
<p>Refer√™ncias</p>
<ul>
<li>
<p>[OWASP Cheat Sheet: Software Supply Chain Security](Em breve)</p>
</li>
<li>
<p>[OWASP Cheat Sheet: Secure build and deployment](Em breve)</p>
</li>
<li>
<p>OWASP Cheat Sheet: Infrastructure as Code</p>
</li>
<li>
<p>OWASP Cheat Sheet: Deserialization</p>
</li>
<li>
<p>SAFECode Software Integrity Controls</p>
</li>
<li>
<p>A 'Worst Nightmare' Cyberattack: The Untold Story Of The SolarWinds Hack</p>
</li>
<li>
<p>CodeCov Bash Uploader Compromise</p>
</li>
<li>
<p>Securing DevOps by Julien Vehent</p>
</li>
</ul>
<p><strong>Lista dos CWEs Mapeados:</strong></p>
<ul>
<li>
<p>CWE-345 Insufficient Verification of Data Authenticity</p>
</li>
<li>
<p>CWE-353 Missing Support for Integrity Check</p>
</li>
<li>
<p>CWE-426 Untrusted Search Path</p>
</li>
<li>
<p>CWE-494 Download of Code Without Integrity Check</p>
</li>
<li>
<p>CWE-502 Deserialization of Untrusted Data</p>
</li>
<li>
<p>CWE-565 Reliance on Cookies without Validation and Integrity Checking</p>
</li>
<li>
<p>CWE-784 Reliance on Cookies without Validation and Integrity Checking in a Security Decision</p>
</li>
<li>
<p>CWE-829 Inclusion of Functionality from Untrusted Control Sphere</p>
</li>
<li>
<p>CWE-830 Inclusion of Web Functionality from an Untrusted Source</p>
</li>
<li>
<p>CWE-915 Improperly Controlled Modification of Dynamically-Determined Object Attributes</p>
</li>
</ul>
<hr>
<hr>
<hr>
<h2 id="conversa-com-chatgpt">Conversa com ChatGPT</h2>
<h3 id="q1---start-a08">Q1 - Start A08</h3>
<blockquote>
<p>Fale mais sobre A08 do OWASP : Software and Data Integrity Failures</p>
</blockquote>
<p>Claro, Rafael! A categoria <strong>A08:2021 - Software and Data Integrity Failures</strong> da OWASP Top 10 trata de falhas relacionadas √† <strong>confian√ßa em fontes externas de software, bibliotecas, atualiza√ß√µes e dados sem verifica√ß√£o adequada de integridade</strong>. Isso inclui riscos como inje√ß√µes maliciosas em bibliotecas, atualiza√ß√µes corrompidas ou manipuladas, e pipelines de CI/CD inseguros.</p>
<hr>
<p>üîç <strong>O que isso significa na pr√°tica?</strong></p>
<p>Quando uma aplica√ß√£o:</p>
<ul>
<li>Usa <strong>depend√™ncias de terceiros</strong> sem validar sua integridade (ex: via hash, assinatura);</li>
<li>Realiza <strong>atualiza√ß√µes autom√°ticas</strong> de software ou componentes sem verificar a origem e integridade;</li>
<li>Possui pipelines de <strong>integra√ß√£o e entrega cont√≠nua (CI/CD)</strong> mal protegidos;</li>
<li>Permite que usu√°rios fa√ßam upload de arquivos sem checagem de conte√∫do ou origem;</li>
<li>Executa scripts configur√°veis (como YAMLs ou JSONs) sem sanitiza√ß√£o adequada;</li>
</ul>
<p>...ela se exp√µe a ataques como:</p>
<ul>
<li><strong>Ataques √† cadeia de suprimentos (supply chain attacks)</strong>;</li>
<li><strong>Ataques por bibliotecas maliciosas (ex: npm typosquatting)</strong>;</li>
<li><strong>Execu√ß√£o de c√≥digo remoto</strong> com privil√©gios da aplica√ß√£o.</li>
</ul>
<hr>
<p>üî• <strong>Exemplos reais</strong></p>
<ul>
<li>Em 2020, o ataque √† <strong>SolarWinds</strong> permitiu que agentes maliciosos injetassem c√≥digo malicioso em atualiza√ß√µes leg√≠timas de software.</li>
<li>Casos de pacotes maliciosos no <strong>npm</strong>, <strong>PyPI</strong> e outros reposit√≥rios, que visam capturar tokens, senhas ou executar comandos remotos.</li>
<li>Scripts maliciosos injetados em ambientes que executam configura√ß√µes do tipo YAML ou JSON sem valida√ß√£o.</li>
</ul>
<hr>
<p>‚úÖ <strong>Como se proteger?</strong></p>
<ol>
<li>
<p><strong>Verificar assinaturas digitais</strong> de bibliotecas, pacotes e atualiza√ß√µes.</p>
</li>
<li>
<p>Usar <strong>Gerenciadores de Depend√™ncia seguros</strong> com <em>lockfiles</em> (como <code>package-lock.json</code>, <code>composer.lock</code>).</p>
</li>
<li>
<p>Ativar e proteger pipelines CI/CD com:</p>
<ul>
<li>Controle de acesso;</li>
<li>Vari√°veis seguras;</li>
<li>Auditoria de etapas e hist√≥rico.</li>
</ul>
</li>
<li>
<p>Validar e filtrar cuidadosamente qualquer dado ou arquivo usado para configurar ou atualizar sistemas.</p>
</li>
<li>
<p>Monitorar depend√™ncias usando ferramentas como:</p>
<ul>
<li><a href="https://owasp.org/www-project-dependency-check/">OWASP Dependency-Check</a></li>
<li>Snyk, Dependabot, Renovate, etc.</li>
</ul>
</li>
<li>
<p>Implementar pol√≠ticas de <strong>principle of least privilege</strong> para reposit√≥rios e pipelines.</p>
</li>
</ol>
<hr>
<p>Se quiser, posso te mostrar como verificar a integridade de depend√™ncias num projeto espec√≠fico (ex: Laravel, Go, Python). Quer?</p>
<h2 id="q2---como-se-proteger-no-laravel">Q2 - Como se proteger no Laravel</h2>
<blockquote>
<p>Mostre pra Laravel</p>
</blockquote>
<p>√ìtimo ponto, Rafael ‚Äî proteger o CI/CD no <strong>Azure DevOps</strong> √© fundamental para evitar falhas de integridade de software (OWASP A08). Como ele controla o que vai para produ√ß√£o, qualquer brecha aqui pode permitir que c√≥digo malicioso ou alterado seja implantado.</p>
<p>Aqui est√£o as <strong>principais pr√°ticas de seguran√ßa para proteger o CI/CD no Azure DevOps</strong>:</p>
<hr>
<p>üîê <strong>1. Proteja os <code>Service Connections</code> e <code>Secrets</code></strong></p>
<ul>
<li><strong>Nunca use vari√°veis sens√≠veis diretamente em YAML</strong>.</li>
<li>Use o <strong>Azure Key Vault</strong> integrado com o pipeline para armazenar segredos.</li>
<li>Use <code>secrets: true</code> para evitar que valores apare√ßam em logs.</li>
</ul>
<p><strong>Exemplo:</strong></p>
<pre class="hljs"><code><div><span class="hljs-attr">variables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">my-secrets-group</span>

<span class="hljs-attr">steps:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">echo</span> <span class="hljs-string">$(DATABASE_PASSWORD)</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'Usar vari√°vel secreta'</span>
</div></code></pre>
<hr>
<p>üöß <strong>2. Restrinja quem pode editar pipelines</strong></p>
<ul>
<li>
<p><strong>Configure permiss√µes de seguran√ßa</strong> nos reposit√≥rios e pipelines:</p>
<ul>
<li>Apenas usu√°rios autorizados podem editar YAML ou pipelines Classic.</li>
<li>Use <strong>branch policies</strong> para evitar altera√ß√µes diretas em <code>main</code>/<code>production</code>.</li>
</ul>
</li>
</ul>
<hr>
<p>üîê <strong>3. Assine e valide artefatos</strong></p>
<ul>
<li>
<p>Se voc√™ estiver gerando <strong>pacotes, containers ou arquivos de build</strong>, implemente:</p>
<ul>
<li><strong>Assinatura digital de artefatos</strong>.</li>
<li>Valida√ß√£o de hash no destino (ex: validar que o hash da imagem Docker corresponde ao esperado).</li>
</ul>
</li>
</ul>
<hr>
<p>üõ°Ô∏è <strong>4. Use ambientes protegidos (Environments)</strong></p>
<p>O Azure DevOps permite que voc√™ configure <strong>&quot;Environments&quot;</strong> com <strong>aprova√ß√µes manuais</strong>, escopo limitado de deploy, e vari√°veis separadas.</p>
<p><strong>Vantagens:</strong></p>
<ul>
<li>Controla quem pode fazer deploy.</li>
<li>Permite configurar <em>&quot;checks&quot;</em> (ex: aprova√ß√£o manual, tempo de espera, etc).</li>
</ul>
<hr>
<p>üîÑ <strong>5. Use deployment slots no Azure App Service</strong></p>
<p>Ao usar <strong>Web Apps no Azure</strong>, configure um <strong>slot de staging</strong>:</p>
<ul>
<li>Realize o deploy no slot de staging.</li>
<li>Teste o app.</li>
<li>Fa√ßa o swap para produ√ß√£o <strong>somente ap√≥s valida√ß√£o</strong>.</li>
</ul>
<p>Evita que uma build defeituosa afete imediatamente o ambiente de produ√ß√£o.</p>
<hr>
<p>üëÄ <strong>6. Habilite logs e auditoria</strong></p>
<ul>
<li>Ative <strong>auditoria no Azure DevOps</strong> para monitorar quem alterou pipelines ou secrets.</li>
<li>Configure alertas para mudan√ßas inesperadas.</li>
</ul>
<hr>
<p>üß™ <strong>7. Execute testes e auditoria autom√°tica</strong></p>
<p>Inclua etapas como:</p>
<pre class="hljs"><code><div><span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">audit</span>
  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'Auditoria de seguran√ßa Composer'</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">php</span> <span class="hljs-string">artisan</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'Testes automatizados'</span>
</div></code></pre>
<p>E tamb√©m scanners de seguran√ßa como:</p>
<ul>
<li><strong>Snyk</strong></li>
<li><strong>Trivy (para containers)</strong></li>
<li><strong>OWASP Dependency-Check</strong></li>
</ul>
<hr>
<p>üö´ <strong>8. Evite execu√ß√£o remota sem valida√ß√£o</strong></p>
<p>Se voc√™ aceita artefatos externos (como YAMLs, JSONs, arquivos ZIP), <strong>valide bem antes de usar</strong>. Nunca execute comandos diretamente com base nesses arquivos sem verifica√ß√£o.</p>
<hr>
<p>üìå <strong>9. Sempre fixe as vers√µes de a√ß√µes e ferramentas</strong></p>
<p>Evite usar refer√™ncias do tipo <code>@latest</code> ou <code>@master</code>. Prefira <code>@v1.2.3</code>, para garantir que uma atualiza√ß√£o inesperada n√£o quebre ou comprometa seu pipeline.</p>
<hr>
<p>üí° Exemplo simples de pipeline seguro em Laravel (resumo)</p>
<pre class="hljs"><code><div><span class="hljs-attr">trigger:</span>
  <span class="hljs-attr">branches:</span>
    <span class="hljs-attr">include:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">LaravelSecrets</span>

<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Build</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">ComposerInstall</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">UsePHP@0</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">version:</span> <span class="hljs-string">'8.2'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">install</span> <span class="hljs-string">--no-dev</span> <span class="hljs-string">--optimize-autoloader</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">audit</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">RunTests</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">php</span> <span class="hljs-string">artisan</span> <span class="hljs-string">test</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Deploy</span>
    <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">succeeded()</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">deployment:</span> <span class="hljs-string">DeployToProd</span>
        <span class="hljs-attr">environment:</span> <span class="hljs-string">'Production'</span>
        <span class="hljs-attr">strategy:</span>
          <span class="hljs-attr">runOnce:</span>
            <span class="hljs-attr">deploy:</span>
              <span class="hljs-attr">steps:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">echo</span> <span class="hljs-string">"Deploy seguro com aprova√ß√£o manual"</span>
</div></code></pre>
<hr>
<p>Se quiser, posso montar um <code>azure-pipelines.yml</code> mais completo para seu projeto Laravel, com deploy para Azure Web App usando slots e chaves do Key Vault. Deseja isso?</p>
<h3 id="q4---cmo-devera-ser-o-azure-pipelinesyaml">Q4 - Cmo devera ser o <code>azure-pipelines.yaml</code></h3>
<blockquote>
<p>Monte um azure-pipelines.yml mais completo e explique bem cada etapa do arquivo</p>
</blockquote>
<p>Perfeito, Rafael! Abaixo est√° um exemplo bem estruturado de um arquivo <code>azure-pipelines.yml</code> completo para um <strong>projeto Laravel</strong> com:</p>
<ul>
<li><strong>Build seguro</strong></li>
<li><strong>Testes</strong></li>
<li><strong>Auditoria de depend√™ncias</strong></li>
<li><strong>Deploy com aprova√ß√£o manual</strong></li>
<li><strong>Uso do Key Vault</strong></li>
<li><strong>Deploy com slot de staging</strong></li>
</ul>
<hr>
<p>üõ†Ô∏è <code>azure-pipelines.yml</code> COMPLETO (comentado linha a linha)</p>
<pre class="hljs"><code><div><span class="hljs-attr">trigger:</span>
  <span class="hljs-attr">branches:</span>
    <span class="hljs-attr">include:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>  <span class="hljs-comment"># üö® Pipeline s√≥ dispara quando a branch 'main' sofre push.</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">LaravelSecrets</span>  <span class="hljs-comment"># üîê Grupo de vari√°veis (ex: chaves .env) protegidas via Azure Key Vault</span>

<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Build</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üîß Etapa de Build e Auditoria'</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">ComposerAudit</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üõ†Ô∏è Instala√ß√£o de Depend√™ncias e Auditoria'</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">vmImage:</span> <span class="hljs-string">'ubuntu-latest'</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">UsePHPVersion@0</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">versionSpec:</span> <span class="hljs-string">'8.2'</span>
              <span class="hljs-attr">addToPath:</span> <span class="hljs-literal">true</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">checkout:</span> <span class="hljs-string">self</span>  <span class="hljs-comment"># üì¶ Clona o c√≥digo do reposit√≥rio</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">|
              composer install --no-dev --optimize-autoloader
</span>            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üì¶ Composer Install'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">audit</span>
            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üîç Composer Audit - Verifica√ß√£o de vulnerabilidades'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">PublishBuildArtifacts@1</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">pathToPublish:</span> <span class="hljs-string">'$(System.DefaultWorkingDirectory)'</span>
              <span class="hljs-attr">artifactName:</span> <span class="hljs-string">'laravel-artifacts'</span>
              <span class="hljs-attr">publishLocation:</span> <span class="hljs-string">'Container'</span>
            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üì§ Publicar artefato para pr√≥xima etapa'</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üß™ Etapa de Testes Automatizados'</span>
    <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">Build</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">succeeded()</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">RunTests</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'‚ñ∂Ô∏è PHPUnit Testes'</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">vmImage:</span> <span class="hljs-string">'ubuntu-latest'</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">DownloadBuildArtifacts@0</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">artifactName:</span> <span class="hljs-string">'laravel-artifacts'</span>
              <span class="hljs-attr">downloadPath:</span> <span class="hljs-string">'$(System.DefaultWorkingDirectory)'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">|
              cp .env.pipelines .env  # üìù Usa um .env pr√≥prio para testes
              php artisan key:generate
</span>            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'‚öôÔ∏è Preparar .env e chave app'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">php</span> <span class="hljs-string">artisan</span> <span class="hljs-string">test</span>
            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üß™ Executar Testes com PHPUnit'</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Deploy</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üöÄ Etapa de Deploy'</span>
    <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">succeeded()</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">deployment:</span> <span class="hljs-string">DeployToStaging</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üì¶ Deploy para slot de staging'</span>
        <span class="hljs-attr">environment:</span> <span class="hljs-string">'production-staging'</span>  <span class="hljs-comment"># üåç Ambiente com aprova√ß√£o manual no Azure DevOps</span>
        <span class="hljs-attr">strategy:</span>
          <span class="hljs-attr">runOnce:</span>
            <span class="hljs-attr">deploy:</span>
              <span class="hljs-attr">steps:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">AzureWebApp@1</span>
                  <span class="hljs-attr">inputs:</span>
                    <span class="hljs-attr">azureSubscription:</span> <span class="hljs-string">'MinhaConexaoAzure'</span>  <span class="hljs-comment"># üîê Nome do servi√ßo de conex√£o com Azure</span>
                    <span class="hljs-attr">appName:</span> <span class="hljs-string">'meu-app-laravel'</span>              <span class="hljs-comment"># üåê Nome do App Service</span>
                    <span class="hljs-attr">deployToSlotOrASE:</span> <span class="hljs-literal">true</span>
                    <span class="hljs-attr">resourceGroupName:</span> <span class="hljs-string">'meu-grupo-rg'</span>
                    <span class="hljs-attr">slotName:</span> <span class="hljs-string">'staging'</span>                     <span class="hljs-comment"># üéØ Slot de staging</span>
                    <span class="hljs-attr">package:</span> <span class="hljs-string">'$(Pipeline.Workspace)/laravel-artifacts'</span>
                  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üåê Deploy para Azure App Service (staging)'</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">deployment:</span> <span class="hljs-string">SwapSlot</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üîÅ Promover staging para produ√ß√£o'</span>
        <span class="hljs-attr">environment:</span> <span class="hljs-string">'production'</span>  <span class="hljs-comment"># ‚ö†Ô∏è Ambiente real com nova aprova√ß√£o</span>
        <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">DeployToStaging</span>
        <span class="hljs-attr">strategy:</span>
          <span class="hljs-attr">runOnce:</span>
            <span class="hljs-attr">deploy:</span>
              <span class="hljs-attr">steps:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">AzureAppServiceManage@0</span>
                  <span class="hljs-attr">inputs:</span>
                    <span class="hljs-attr">azureSubscription:</span> <span class="hljs-string">'MinhaConexaoAzure'</span>
                    <span class="hljs-attr">Action:</span> <span class="hljs-string">'Swap Slots'</span>
                    <span class="hljs-attr">WebAppName:</span> <span class="hljs-string">'meu-app-laravel'</span>
                    <span class="hljs-attr">ResourceGroupName:</span> <span class="hljs-string">'meu-grupo-rg'</span>
                    <span class="hljs-attr">SourceSlot:</span> <span class="hljs-string">'staging'</span>
                    <span class="hljs-attr">TargetSlot:</span> <span class="hljs-string">'production'</span>
                  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'üöÄ Swap staging ‚Üí produ√ß√£o'</span>
</div></code></pre>
<hr>
<p>üß† EXPLICA√á√ÉO RESUMIDA POR BLOCOS</p>
<table>
<thead>
<tr>
<th>Bloco</th>
<th>Explica√ß√£o</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trigger</code></td>
<td>S√≥ inicia o pipeline com push na <code>main</code>.</td>
</tr>
<tr>
<td><code>variables</code></td>
<td>Carrega segredos do Key Vault, como <code>.env</code>, senhas etc.</td>
</tr>
<tr>
<td><code>Build</code></td>
<td>Instala as depend√™ncias via <code>composer</code>, faz auditoria de seguran√ßa e publica os arquivos como artefato.</td>
</tr>
<tr>
<td><code>Test</code></td>
<td>Baixa o artefato e executa <code>php artisan test</code> ap√≥s configurar o ambiente <code>.env</code>.</td>
</tr>
<tr>
<td><code>DeployToStaging</code></td>
<td>Faz deploy em um <strong>slot de staging</strong>, com revis√£o ou aprova√ß√£o manual habilitada (recomendado).</td>
</tr>
<tr>
<td><code>SwapSlot</code></td>
<td>Ap√≥s a aprova√ß√£o, troca os slots e promove staging para produ√ß√£o.</td>
</tr>
<tr>
<td><code>environments</code></td>
<td>Usado para aplicar <strong>checks manuais</strong>, escopos de vari√°vel, ou limitar quem pode fazer deploy.</td>
</tr>
</tbody>
</table>
<hr>
<p>üîí Seguran√ßa e Integridade</p>
<ul>
<li>üíº <code>Azure Key Vault</code> garante que senhas/API keys n√£o fiquem no c√≥digo.</li>
<li>üîê Slots protegem contra deploys diretos em produ√ß√£o.</li>
<li>‚úÖ Auditoria de depend√™ncias (composer audit) impede que libs vulner√°veis passem.</li>
<li>‚ö†Ô∏è <code>environment:</code> for√ßa <strong>aprovadores humanos</strong> antes de deploys cr√≠ticos.</li>
</ul>
<hr>
<p>Se quiser, posso adaptar esse YAML para <strong>usar Docker</strong>, <strong>banco de dados MySQL/Azure SQL</strong>, ou incluir integra√ß√£o com <strong>tests no Cypress</strong>, por exemplo. Deseja expandir para algum desses cen√°rios?</p>
<h2 id="q4---o-ataque-da-solar-wind">Q4 - O ataque da Solar Wind</h2>
<blockquote>
<p>Fale mais sobre o ataque do SolarWind e o relaicone ao A08 do OWASP</p>
</blockquote>
<p>O ataque √† <strong>SolarWinds</strong> √© um dos exemplos mais emblem√°ticos de falha de integridade de software ‚Äî exatamente o que o OWASP classifica como <strong>A08:2021 ‚Äì Software and Data Integrity Failures</strong>.</p>
<hr>
<p><strong>üïµÔ∏è‚Äç‚ôÇÔ∏è O que foi o ataque √† SolarWinds?</strong></p>
<p>üìå Contexto</p>
<p>A SolarWinds √© uma empresa que desenvolve software de monitoramento de infraestrutura, incluindo o <strong>Orion Platform</strong>, usado por milhares de organiza√ß√µes privadas e p√∫blicas, inclusive o governo dos EUA.</p>
<p>üéØ O que aconteceu?</p>
<p>Em 2020, invasores conseguiram <strong>inserir c√≥digo malicioso</strong> diretamente no build do Orion (um tipo de &quot;backdoor&quot;), em uma das vers√µes oficiais distribu√≠das aos clientes.</p>
<p>Esse c√≥digo foi entregue como parte do <strong>update leg√≠timo</strong> do software ‚Äî ou seja, os pr√≥prios clientes instalaram a porta de entrada para o ataque acreditando estar apenas atualizando o sistema.</p>
<hr>
<p>üîç T√©cnica usada: <strong>Ataque √† Cadeia de Suprimentos (Supply Chain Attack)</strong></p>
<ul>
<li>Os atacantes <strong>invadiram a infraestrutura de CI/CD da SolarWinds</strong>.</li>
<li>Conseguiram <strong>alterar o pipeline de build</strong> para <strong>injetar um trojan (SUNBURST)</strong> dentro da DLL leg√≠tima.</li>
<li>O software foi <strong>assinado digitalmente</strong> pela pr√≥pria SolarWinds, passando por todas as verifica√ß√µes de integridade locais dos clientes.</li>
</ul>
<hr>
<p><strong>‚ö†Ô∏è Rela√ß√£o com OWASP A08 ‚Äì Software and Data Integrity Failures</strong></p>
<p>Essa categoria cobre falhas em que:</p>
<blockquote>
<p><em>‚ÄúO c√≥digo, a infraestrutura ou dados de uma aplica√ß√£o podem ser comprometidos por falta de valida√ß√£o de integridade ou seguran√ßa na cadeia de fornecimento.‚Äù</em></p>
</blockquote>
<p>dA08 inclui riscos como:</p>
<ul>
<li>Deploy autom√°tico sem verifica√ß√£o.</li>
<li>Aus√™ncia de <strong>assinatura ou valida√ß√£o de artefatos</strong>.</li>
<li>Confian√ßa excessiva em <strong>pacotes externos ou depend√™ncias</strong>.</li>
<li>Pipelines CI/CD <strong>mal protegidos</strong> (como no caso da SolarWinds).</li>
</ul>
<hr>
<p><strong>üõ°Ô∏è O que podemos aprender com isso (boas pr√°ticas)</strong></p>
<p>CI/CD seguro:</p>
<ul>
<li><strong>Use controles de acesso rigorosos</strong> (RBAC) nos pipelines.</li>
<li><strong>Registre e monitore</strong> altera√ß√µes em scripts de build e vari√°veis.</li>
<li><strong>Use revis√£o de c√≥digo obrigat√≥ria</strong> para altera√ß√µes em arquivos de pipeline (YAML, bash, Dockerfile).</li>
<li><strong>Assine digitalmente os artefatos</strong> e valide os hashes antes do deploy.</li>
</ul>
<p>Verifica√ß√µes:</p>
<ul>
<li>
<p>Verifique a <strong>integridade de depend√™ncias</strong> (<code>composer audit</code>, <code>npm audit</code>, etc).</p>
</li>
<li>
<p>Use ferramentas como:</p>
<ul>
<li><a href="https://slsa.dev/">SLSA (Supply chain Levels for Software Artifacts)</a></li>
<li><a href="https://sigstore.dev/">Sigstore / Cosign</a></li>
<li><a href="https://owasp.org/www-project-dependency-check/">OWASP Dependency-Check</a></li>
</ul>
</li>
</ul>
<hr>
<p>üß† Conclus√£o</p>
<p>O ataque √† SolarWinds mostrou que mesmo empresas com software confi√°vel podem ser vetor de ataque quando h√° falhas de integridade no processo de build. Ele √© um <strong>exemplo real e devastador</strong> do que o OWASP classifica como A08.</p>
<p>Quer que eu te mostre como aplicar algum desses controles (ex: auditoria de depend√™ncias ou valida√ß√£o de hash) no seu pipeline Azure DevOps para Laravel?</p>
<h2 id="an%C3%A1lise-do-perplexity">An√°lise do Perplexity</h2>
<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" class="logo" width="120"/>
<h1 id="a082021---falhas-de-integridade-de-software-e-dados-uma-an%C3%A1lise-aprofundada">A08:2021 - Falhas de Integridade de Software e Dados: Uma An√°lise Aprofundada</h1>
<p>Esta an√°lise explora a categoria A08:2021 do OWASP Top 10, focada nas falhas de integridade de software e dados. Trata-se de uma vulnerabilidade cr√≠tica introduzida na lista de 2021 que aborda riscos relacionados a atualiza√ß√µes de software, dados cr√≠ticos e pipelines de CI/CD que n√£o verificam adequadamente a integridade. Os impactos dessas falhas podem ser devastadores, resultando em comprometimento de sistemas, execu√ß√£o de c√≥digo malicioso e perda de confian√ßa nos aplicativos afetados.</p>
<h2 id="contexto-e-defini%C3%A7%C3%A3o">Contexto e Defini√ß√£o</h2>
<p>As falhas de integridade de software e dados representam uma nova categoria no OWASP Top 10 de 2021, focando em vulnerabilidades que surgem quando componentes de software n√£o verificados ou n√£o confi√°veis s√£o introduzidos em sistemas. Esta categoria se concentra especificamente em suposi√ß√µes relacionadas a atualiza√ß√µes de software, dados cr√≠ticos e pipelines de CI/CD sem a devida verifica√ß√£o de integridade<a href="https://owasp.org/Top10/">^1</a>.</p>
<p>De acordo com dados do OWASP, esta categoria est√° associada a 10 CWEs (Common Weakness Enumerations), apresenta uma taxa m√°xima de incid√™ncia de 16,67% e uma taxa m√©dia de incid√™ncia de 2,05%. O impacto m√©dio ponderado √© significativo em 7,94, tornando-a uma das categorias com maior impacto ponderado nos dados de CVE/CVSS<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<p>As falhas de integridade de software e dados referem-se a c√≥digo e infraestrutura que n√£o protegem contra viola√ß√µes de integridade. Estas ocorrem quando sistemas dependem de plugins, bibliotecas ou m√≥dulos de fontes n√£o confi√°veis, ou quando atualiza√ß√µes de software s√£o baixadas sem verifica√ß√£o de integridade suficiente e aplicadas ao aplicativo anteriormente confi√°vel<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="principais-vulnerabilidades-associadas">Principais Vulnerabilidades Associadas</h3>
<p>Entre as vulnerabilidades mais not√°veis associadas a esta categoria est√£o:</p>
<ul>
<li><strong>CWE-829</strong>: Inclus√£o de Funcionalidade de Esfera de Controle N√£o Confi√°vel</li>
<li><strong>CWE-494</strong>: Download de C√≥digo Sem Verifica√ß√£o de Integridade</li>
<li><strong>CWE-502</strong>: Desserializa√ß√£o de Dados N√£o Confi√°veis<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a></li>
</ul>
<p>Estas fragilidades permitem que atacantes manipulem software ou dados, potencialmente levando ao controle n√£o autorizado, viola√ß√µes de dados ou atividades maliciosas dentro dos aplicativos<a href="https://krishnag.ceo/blog/software-and-data-integrity-failures-a-critical-concern-for-developers/">^4</a>.</p>
<h2 id="causas-e-mecanismos-de-ataque">Causas e Mecanismos de Ataque</h2>
<h3 id="fontes-das-vulnerabilidades">Fontes das Vulnerabilidades</h3>
<p>As falhas de integridade de software e dados geralmente resultam de v√°rias pr√°ticas inseguras:</p>
<ol>
<li><strong>Depend√™ncias n√£o verificadas</strong>: Aplica√ß√µes que dependem de plugins, bibliotecas ou m√≥dulos de fontes n√£o confi√°veis, reposit√≥rios ou redes de distribui√ß√£o de conte√∫do (CDNs)<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
<li><strong>Pipelines de CI/CD inseguros</strong>: Infraestruturas de integra√ß√£o e entrega cont√≠nuas com falhas de seguran√ßa podem introduzir potencial para acesso n√£o autorizado, c√≥digo malicioso ou comprometimento do sistema<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
<li><strong>Funcionalidade de atualiza√ß√£o autom√°tica insegura</strong>: Aplica√ß√µes que baixam atualiza√ß√µes sem verifica√ß√£o de integridade suficiente, permitindo que atacantes potencialmente distribuam suas pr√≥prias atualiza√ß√µes maliciosas<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
<li><strong>Desserializa√ß√£o insegura</strong>: Quando objetos ou dados s√£o codificados ou serializados em uma estrutura que um atacante pode ver e modificar, tornando-os vulner√°veis √† desserializa√ß√£o insegura<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
</ol>
<h3 id="ataques-%C3%A0-cadeia-de-suprimentos-de-software">Ataques √† Cadeia de Suprimentos de Software</h3>
<p>Os ataques √† cadeia de suprimentos de software tornaram-se particularmente alarmantes no contexto atual. Estes ocorrem quando atores maliciosos se infiltram em ecossistemas de software confi√°veis, comprometendo depend√™ncias ou canais de distribui√ß√£o<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^4</a>.</p>
<h2 id="cen%C3%A1rios-de-ataque-e-casos-reais">Cen√°rios de Ataque e Casos Reais</h2>
<h3 id="cen%C3%A1rio-1-atualiza%C3%A7%C3%B5es-sem-assinatura">Cen√°rio 1: Atualiza√ß√µes sem Assinatura</h3>
<p>Muitos roteadores dom√©sticos, decodificadores, firmware de dispositivos e outros n√£o verificam atualiza√ß√µes por meio de firmware assinado. Firmware n√£o assinado √© um alvo crescente para atacantes, representando uma preocupa√ß√£o maior quando n√£o h√° mecanismo para remediar al√©m de corrigir em uma vers√£o futura<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="cen%C3%A1rio-2-ataque-solarwinds">Cen√°rio 2: Ataque SolarWinds</h3>
<p>O ataque SolarWinds Orion √© um exemplo not√°vel de comprometimento de mecanismos de atualiza√ß√£o. Mesmo com processos seguros de constru√ß√£o e integridade de atualiza√ß√£o, a empresa teve estes subvertidos. Durante v√°rios meses, a empresa distribuiu uma atualiza√ß√£o maliciosa altamente direcionada para mais de 18.000 organiza√ß√µes, das quais cerca de 100 foram afetadas. Este √© considerado um dos ataques mais abrangentes e significativos deste tipo na hist√≥ria<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="cen%C3%A1rio-3-desserializa%C3%A7%C3%A3o-insegura">Cen√°rio 3: Desserializa√ß√£o Insegura</h3>
<p>Um aplicativo React que chama um conjunto de microservi√ßos Spring Boot pode enfrentar vulnerabilidades quando os desenvolvedores tentam garantir que seu c√≥digo seja imut√°vel serializando o estado do usu√°rio e passando-o de um lado para outro com cada solicita√ß√£o. Um atacante que percebe a assinatura do objeto Java &quot;rO0&quot; (em base64) pode usar ferramentas como Java Serial Killer para obter execu√ß√£o remota de c√≥digo no servidor da aplica√ß√£o<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h2 id="impactos-e-consequ%C3%AAncias">Impactos e Consequ√™ncias</h2>
<p>As falhas de integridade de software e dados podem ter consequ√™ncias graves e de longo alcance:</p>
<h3 id="comprometimento-da-integridade-dos-dados">Comprometimento da Integridade dos Dados</h3>
<p>Atacantes podem alterar, manipular ou corromper dados cr√≠ticos, resultando em informa√ß√µes imprecisas sendo armazenadas ou processadas. Isso compromete a confiabilidade do sistema, especialmente em setores onde a integridade dos dados √© vital, como finan√ßas, sa√∫de e direito<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h3 id="execu%C3%A7%C3%A3o-de-c%C3%B3digo-malicioso">Execu√ß√£o de C√≥digo Malicioso</h3>
<p>A explora√ß√£o de vulnerabilidades de software pode permitir que atacantes injetem c√≥digo malicioso, levando √† execu√ß√£o de comandos n√£o autorizados. Isso pode causar comportamento imprevis√≠vel do sistema ou abrir backdoors para ataques adicionais<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h3 id="danos-%C3%A0-reputa%C3%A7%C3%A3o">Danos √† Reputa√ß√£o</h3>
<p>Viola√ß√µes de dados ou integridade frequentemente corroem a confian√ßa entre usu√°rios, clientes e parceiros, prejudicando a reputa√ß√£o da organiza√ß√£o. Isso pode levar √† perda de lealdade do cliente e, em √∫ltima an√°lise, a oportunidades de neg√≥cios perdidas<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h3 id="consequ%C3%AAncias-financeiras">Consequ√™ncias Financeiras</h3>
<p>Ataques √† integridade de software e dados podem resultar em perdas financeiras significativas, incluindo multas por n√£o conformidade e custos de recupera√ß√£o<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h2 id="m%C3%A9todos-de-preven%C3%A7%C3%A3o-e-mitiga%C3%A7%C3%A3o">M√©todos de Preven√ß√£o e Mitiga√ß√£o</h2>
<h3 id="verifica%C3%A7%C3%A3o-de-integridade">Verifica√ß√£o de Integridade</h3>
<p>Use assinaturas digitais ou mecanismos similares para verificar se o software ou dados s√£o da fonte esperada e n√£o foram alterados<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="gest%C3%A3o-de-depend%C3%AAncias-seguras">Gest√£o de Depend√™ncias Seguras</h3>
<p>Garanta que bibliotecas e depend√™ncias, como npm ou Maven, estejam consumindo reposit√≥rios confi√°veis. Se voc√™ tiver um perfil de risco mais alto, considere hospedar um reposit√≥rio interno conhecido como confi√°vel e verificado<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="ferramentas-de-seguran%C3%A7a-da-cadeia-de-suprimentos">Ferramentas de Seguran√ßa da Cadeia de Suprimentos</h3>
<p>Utilize ferramentas de seguran√ßa da cadeia de suprimentos de software, como OWASP Dependency Check ou OWASP CycloneDX, para verificar se os componentes n√£o cont√™m vulnerabilidades conhecidas<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h3 id="processos-de-revis%C3%A3o-de-c%C3%B3digo">Processos de Revis√£o de C√≥digo</h3>
<p>Implemente um processo de revis√£o para altera√ß√µes de c√≥digo e configura√ß√£o para minimizar a chance de c√≥digo malicioso ou configura√ß√£o serem introduzidos em seu pipeline de software<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h3 id="segrega%C3%A7%C3%A3o-e-controle-de-acesso-no-cicd">Segrega√ß√£o e Controle de Acesso no CI/CD</h3>
<p>Garanta que seu pipeline de CI/CD tenha segrega√ß√£o adequada, configura√ß√£o e controle de acesso para garantir a integridade do c√≥digo fluindo atrav√©s dos processos de constru√ß√£o e implanta√ß√£o<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h3 id="prote%C3%A7%C3%A3o-contra-desserializa%C3%A7%C3%A3o-insegura">Prote√ß√£o contra Desserializa√ß√£o Insegura</h3>
<p>Certifique-se de que dados serializados n√£o assinados ou n√£o criptografados n√£o sejam enviados para clientes n√£o confi√°veis sem alguma forma de verifica√ß√£o de integridade ou assinatura digital para detectar adultera√ß√£o ou reprodu√ß√£o dos dados serializados<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h2 id="melhores-pr%C3%A1ticas-de-seguran%C3%A7a">Melhores Pr√°ticas de Seguran√ßa</h2>
<h3 id="princ%C3%ADpios-de-seguran%C3%A7a-b%C3%A1sicos">Princ√≠pios de Seguran√ßa B√°sicos</h3>
<p>Adira aos princ√≠pios b√°sicos de seguran√ßa de privil√©gios m√≠nimos e separa√ß√£o de deveres, impondo autentica√ß√£o multifator (MFA), rota√ß√£o de credenciais e garantindo reposit√≥rios confi√°veis para suas depend√™ncias<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^6</a>.</p>
<h3 id="seguran%C3%A7a-no-desenvolvimento">Seguran√ßa no Desenvolvimento</h3>
<p>Integre pr√°ticas de seguran√ßa em todo o ciclo de vida de desenvolvimento de software, incluindo:</p>
<ol>
<li>An√°lise est√°tica de c√≥digo fonte</li>
<li>Verifica√ß√µes de composi√ß√£o de software</li>
<li>Testes de seguran√ßa automatizados</li>
<li>Revis√µes de c√≥digo com foco em seguran√ßa<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^6</a></li>
</ol>
<h3 id="seguran%C3%A7a-nos-ambientes-de-desenvolvimento">Seguran√ßa nos Ambientes de Desenvolvimento</h3>
<p>Proteja seus ambientes de desenvolvimento, sistemas de controle de vers√£o e pipelines de CI/CD contra acesso n√£o autorizado ou manipula√ß√£o. Use ferramentas espec√≠ficas para monitorar e verificar a integridade do c√≥digo em todas as etapas<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^6</a>.</p>
<h2 id="conclus%C3%A3o">Conclus√£o</h2>
<p>As falhas de integridade de software e dados representam uma amea√ßa substancial e crescente no cen√°rio atual de seguran√ßa cibern√©tica. Com a crescente depend√™ncia de componentes de terceiros, atualiza√ß√µes autom√°ticas e pipelines de CI/CD, a superf√≠cie de ataque para estas vulnerabilidades continua a se expandir.</p>
<p>A mitiga√ß√£o eficaz dessas falhas requer uma abordagem multifacetada, incluindo verifica√ß√µes rigorosas de integridade, gest√£o segura de depend√™ncias e processos robustos de revis√£o de c√≥digo. Organiza√ß√µes devem adotar uma mentalidade de &quot;confian√ßa zero&quot; em rela√ß√£o √† integridade do software, verificando cada componente e atualiza√ß√£o antes da integra√ß√£o.</p>
<p>√Ä medida que ataques como o SolarWinds demonstram, at√© mesmo organiza√ß√µes com processos de seguran√ßa aparentemente s√≥lidos podem ser comprometidas atrav√©s da cadeia de suprimentos de software. Portanto, a vigil√¢ncia cont√≠nua, a educa√ß√£o dos desenvolvedores e a implementa√ß√£o de controles de seguran√ßa em camadas s√£o essenciais para proteger contra estas sofisticadas amea√ßas √† integridade de software e dados.</p>
<div style="text-align: center">‚ÅÇ</div>
<p>[^53]: https://opencre.org/node/standard/CWE/section/Inclusion of Functionality from Untrusted Control Sphere</p>

</body>
</html>
