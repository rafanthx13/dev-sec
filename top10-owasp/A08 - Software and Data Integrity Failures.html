<!DOCTYPE html>
<html>
<head>
<title>A08 - Software and Data Integrity Failures.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="a08---software-and-data-integrity-failures">A08 - Software and Data Integrity Failures</h1>
<h2 id="resumo">Resumo</h2>
<p>Uma falha de integridade ocorre quando algo é modificado de forma maliciosa sem que ninguém perceba. A falha mais comum acontece ao utilizar dependências de terceiros, como bibliotecas (libs) e o processo de CI/CD (Integração Contínua/Entrega Contínua). Se você baixar uma biblioteca no dia X e, em uma atualização futura (dia N), essa biblioteca não for proveniente de uma fonte confiável, ela pode conter código malicioso capaz de roubar seus dados. Um pipeline de CI/CD inseguro pode se tornar uma porta dos fundos (backdoor): mesmo que seu código esteja correto, a versão de produção pode ser adulterada com um backdoor. Portanto, é necessário ter maior cuidado ao atualizar dependências e garantir a integridade do pipeline de CI/CD, além de verificar quem realmente tem permissão para alterá-lo.</p>
<h2 id="links">Links</h2>
<ul>
<li>https://medium.com/@madhuhack01/owasp-top-10-a08-2021-owasp-top-10-a08-2021-software-and-data-integrity-failures-df5ab1396f5e</li>
</ul>
<h2 id="owasp">OWASP</h2>
<h3 id="descri%C3%A7%C3%A3o">Descrição</h3>
<p>Falhas na integridade de software e dados estão relacionadas a código e infraestrutura que não protegem contra violações de integridade. Um exemplo disso é quando um aplicativo depende de plugins, bibliotecas ou módulos de fontes, repositórios e redes de entrega de conteúdo (CDNs) não confiáveis. Um pipeline de CI/CD inseguro pode introduzir a possibilidade de acesso não autorizado, código malicioso ou comprometimento do sistema. Por último, muitos aplicativos agora incluem funcionalidade de atualização automática, onde as atualizações são baixadas sem verificação de integridade suficiente e aplicadas ao aplicativo previamente confiável. Atacantes podem potencialmente fazer upload de suas próprias atualizações para serem distribuídas e executadas em todas as instalações. Outro exemplo é quando objetos ou dados são codificados ou serializados em uma estrutura que um atacante pode ver e modificar, o que torna a deserialização insegura.</p>
<h3 id="como-previinir">Como previinir</h3>
<ul>
<li>
<p>Use assinaturas digitais ou mecanismos similares para verificar se o software ou os dados são provenientes da fonte esperada e não foram alterados.</p>
</li>
<li>
<p>Certifique-se de que as bibliotecas e dependências, como npm ou Maven, estão consumindo repositórios confiáveis. Se você tiver um perfil de risco mais alto, considere hospedar um repositório interno conhecido como bom que foi examinado.</p>
</li>
<li>
<p>Certifique-se de que uma ferramenta de segurança da cadeia de suprimentos de software, como OWASP Dependency Check ou OWASP CycloneDX, é usada para verificar se os componentes não contêm vulnerabilidades conhecidas.</p>
</li>
<li>
<p>Certifique-se de que haja um processo de revisão para mudanças de código e configuração para minimizar a chance de que código ou configuração maliciosos possam ser introduzidos no seu pipeline de software.</p>
</li>
<li>
<p>Certifique-se de que seu pipeline de CI/CD tenha uma segregação adequada, configuração e controle de acesso para garantir a integridade do código que flui através dos processos de construção e implantação.</p>
</li>
<li>
<p>Certifique-se de que dados serializados não assinados ou não criptografados não sejam enviados a clientes não confiáveis sem algum tipo de verificação de integridade ou assinatura digital para detectar adulteração ou retransmissão dos dados serializados.</p>
</li>
</ul>
<h2 id="referencias-do-owap">Referencias do owap</h2>
<p>Referências</p>
<ul>
<li>
<p>[OWASP Cheat Sheet: Software Supply Chain Security](Em breve)</p>
</li>
<li>
<p>[OWASP Cheat Sheet: Secure build and deployment](Em breve)</p>
</li>
<li>
<p>OWASP Cheat Sheet: Infrastructure as Code</p>
</li>
<li>
<p>OWASP Cheat Sheet: Deserialization</p>
</li>
<li>
<p>SAFECode Software Integrity Controls</p>
</li>
<li>
<p>A 'Worst Nightmare' Cyberattack: The Untold Story Of The SolarWinds Hack</p>
</li>
<li>
<p>CodeCov Bash Uploader Compromise</p>
</li>
<li>
<p>Securing DevOps by Julien Vehent</p>
</li>
</ul>
<p><strong>Lista dos CWEs Mapeados:</strong></p>
<ul>
<li>
<p>CWE-345 Insufficient Verification of Data Authenticity</p>
</li>
<li>
<p>CWE-353 Missing Support for Integrity Check</p>
</li>
<li>
<p>CWE-426 Untrusted Search Path</p>
</li>
<li>
<p>CWE-494 Download of Code Without Integrity Check</p>
</li>
<li>
<p>CWE-502 Deserialization of Untrusted Data</p>
</li>
<li>
<p>CWE-565 Reliance on Cookies without Validation and Integrity Checking</p>
</li>
<li>
<p>CWE-784 Reliance on Cookies without Validation and Integrity Checking in a Security Decision</p>
</li>
<li>
<p>CWE-829 Inclusion of Functionality from Untrusted Control Sphere</p>
</li>
<li>
<p>CWE-830 Inclusion of Web Functionality from an Untrusted Source</p>
</li>
<li>
<p>CWE-915 Improperly Controlled Modification of Dynamically-Determined Object Attributes</p>
</li>
</ul>
<hr>
<hr>
<hr>
<h2 id="conversa-com-chatgpt">Conversa com ChatGPT</h2>
<h3 id="q1---start-a08">Q1 - Start A08</h3>
<blockquote>
<p>Fale mais sobre A08 do OWASP : Software and Data Integrity Failures</p>
</blockquote>
<p>Claro, Rafael! A categoria <strong>A08:2021 - Software and Data Integrity Failures</strong> da OWASP Top 10 trata de falhas relacionadas à <strong>confiança em fontes externas de software, bibliotecas, atualizações e dados sem verificação adequada de integridade</strong>. Isso inclui riscos como injeções maliciosas em bibliotecas, atualizações corrompidas ou manipuladas, e pipelines de CI/CD inseguros.</p>
<hr>
<p>🔍 <strong>O que isso significa na prática?</strong></p>
<p>Quando uma aplicação:</p>
<ul>
<li>Usa <strong>dependências de terceiros</strong> sem validar sua integridade (ex: via hash, assinatura);</li>
<li>Realiza <strong>atualizações automáticas</strong> de software ou componentes sem verificar a origem e integridade;</li>
<li>Possui pipelines de <strong>integração e entrega contínua (CI/CD)</strong> mal protegidos;</li>
<li>Permite que usuários façam upload de arquivos sem checagem de conteúdo ou origem;</li>
<li>Executa scripts configuráveis (como YAMLs ou JSONs) sem sanitização adequada;</li>
</ul>
<p>...ela se expõe a ataques como:</p>
<ul>
<li><strong>Ataques à cadeia de suprimentos (supply chain attacks)</strong>;</li>
<li><strong>Ataques por bibliotecas maliciosas (ex: npm typosquatting)</strong>;</li>
<li><strong>Execução de código remoto</strong> com privilégios da aplicação.</li>
</ul>
<hr>
<p>🔥 <strong>Exemplos reais</strong></p>
<ul>
<li>Em 2020, o ataque à <strong>SolarWinds</strong> permitiu que agentes maliciosos injetassem código malicioso em atualizações legítimas de software.</li>
<li>Casos de pacotes maliciosos no <strong>npm</strong>, <strong>PyPI</strong> e outros repositórios, que visam capturar tokens, senhas ou executar comandos remotos.</li>
<li>Scripts maliciosos injetados em ambientes que executam configurações do tipo YAML ou JSON sem validação.</li>
</ul>
<hr>
<p>✅ <strong>Como se proteger?</strong></p>
<ol>
<li>
<p><strong>Verificar assinaturas digitais</strong> de bibliotecas, pacotes e atualizações.</p>
</li>
<li>
<p>Usar <strong>Gerenciadores de Dependência seguros</strong> com <em>lockfiles</em> (como <code>package-lock.json</code>, <code>composer.lock</code>).</p>
</li>
<li>
<p>Ativar e proteger pipelines CI/CD com:</p>
<ul>
<li>Controle de acesso;</li>
<li>Variáveis seguras;</li>
<li>Auditoria de etapas e histórico.</li>
</ul>
</li>
<li>
<p>Validar e filtrar cuidadosamente qualquer dado ou arquivo usado para configurar ou atualizar sistemas.</p>
</li>
<li>
<p>Monitorar dependências usando ferramentas como:</p>
<ul>
<li><a href="https://owasp.org/www-project-dependency-check/">OWASP Dependency-Check</a></li>
<li>Snyk, Dependabot, Renovate, etc.</li>
</ul>
</li>
<li>
<p>Implementar políticas de <strong>principle of least privilege</strong> para repositórios e pipelines.</p>
</li>
</ol>
<hr>
<p>Se quiser, posso te mostrar como verificar a integridade de dependências num projeto específico (ex: Laravel, Go, Python). Quer?</p>
<h2 id="q2---como-se-proteger-no-laravel">Q2 - Como se proteger no Laravel</h2>
<blockquote>
<p>Mostre pra Laravel</p>
</blockquote>
<p>Ótimo ponto, Rafael — proteger o CI/CD no <strong>Azure DevOps</strong> é fundamental para evitar falhas de integridade de software (OWASP A08). Como ele controla o que vai para produção, qualquer brecha aqui pode permitir que código malicioso ou alterado seja implantado.</p>
<p>Aqui estão as <strong>principais práticas de segurança para proteger o CI/CD no Azure DevOps</strong>:</p>
<hr>
<p>🔐 <strong>1. Proteja os <code>Service Connections</code> e <code>Secrets</code></strong></p>
<ul>
<li><strong>Nunca use variáveis sensíveis diretamente em YAML</strong>.</li>
<li>Use o <strong>Azure Key Vault</strong> integrado com o pipeline para armazenar segredos.</li>
<li>Use <code>secrets: true</code> para evitar que valores apareçam em logs.</li>
</ul>
<p><strong>Exemplo:</strong></p>
<pre class="hljs"><code><div><span class="hljs-attr">variables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">my-secrets-group</span>

<span class="hljs-attr">steps:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">echo</span> <span class="hljs-string">$(DATABASE_PASSWORD)</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'Usar variável secreta'</span>
</div></code></pre>
<hr>
<p>🚧 <strong>2. Restrinja quem pode editar pipelines</strong></p>
<ul>
<li>
<p><strong>Configure permissões de segurança</strong> nos repositórios e pipelines:</p>
<ul>
<li>Apenas usuários autorizados podem editar YAML ou pipelines Classic.</li>
<li>Use <strong>branch policies</strong> para evitar alterações diretas em <code>main</code>/<code>production</code>.</li>
</ul>
</li>
</ul>
<hr>
<p>🔐 <strong>3. Assine e valide artefatos</strong></p>
<ul>
<li>
<p>Se você estiver gerando <strong>pacotes, containers ou arquivos de build</strong>, implemente:</p>
<ul>
<li><strong>Assinatura digital de artefatos</strong>.</li>
<li>Validação de hash no destino (ex: validar que o hash da imagem Docker corresponde ao esperado).</li>
</ul>
</li>
</ul>
<hr>
<p>🛡️ <strong>4. Use ambientes protegidos (Environments)</strong></p>
<p>O Azure DevOps permite que você configure <strong>&quot;Environments&quot;</strong> com <strong>aprovações manuais</strong>, escopo limitado de deploy, e variáveis separadas.</p>
<p><strong>Vantagens:</strong></p>
<ul>
<li>Controla quem pode fazer deploy.</li>
<li>Permite configurar <em>&quot;checks&quot;</em> (ex: aprovação manual, tempo de espera, etc).</li>
</ul>
<hr>
<p>🔄 <strong>5. Use deployment slots no Azure App Service</strong></p>
<p>Ao usar <strong>Web Apps no Azure</strong>, configure um <strong>slot de staging</strong>:</p>
<ul>
<li>Realize o deploy no slot de staging.</li>
<li>Teste o app.</li>
<li>Faça o swap para produção <strong>somente após validação</strong>.</li>
</ul>
<p>Evita que uma build defeituosa afete imediatamente o ambiente de produção.</p>
<hr>
<p>👀 <strong>6. Habilite logs e auditoria</strong></p>
<ul>
<li>Ative <strong>auditoria no Azure DevOps</strong> para monitorar quem alterou pipelines ou secrets.</li>
<li>Configure alertas para mudanças inesperadas.</li>
</ul>
<hr>
<p>🧪 <strong>7. Execute testes e auditoria automática</strong></p>
<p>Inclua etapas como:</p>
<pre class="hljs"><code><div><span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">audit</span>
  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'Auditoria de segurança Composer'</span>

<span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">php</span> <span class="hljs-string">artisan</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'Testes automatizados'</span>
</div></code></pre>
<p>E também scanners de segurança como:</p>
<ul>
<li><strong>Snyk</strong></li>
<li><strong>Trivy (para containers)</strong></li>
<li><strong>OWASP Dependency-Check</strong></li>
</ul>
<hr>
<p>🚫 <strong>8. Evite execução remota sem validação</strong></p>
<p>Se você aceita artefatos externos (como YAMLs, JSONs, arquivos ZIP), <strong>valide bem antes de usar</strong>. Nunca execute comandos diretamente com base nesses arquivos sem verificação.</p>
<hr>
<p>📌 <strong>9. Sempre fixe as versões de ações e ferramentas</strong></p>
<p>Evite usar referências do tipo <code>@latest</code> ou <code>@master</code>. Prefira <code>@v1.2.3</code>, para garantir que uma atualização inesperada não quebre ou comprometa seu pipeline.</p>
<hr>
<p>💡 Exemplo simples de pipeline seguro em Laravel (resumo)</p>
<pre class="hljs"><code><div><span class="hljs-attr">trigger:</span>
  <span class="hljs-attr">branches:</span>
    <span class="hljs-attr">include:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">LaravelSecrets</span>

<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Build</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">ComposerInstall</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">UsePHP@0</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">version:</span> <span class="hljs-string">'8.2'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">install</span> <span class="hljs-string">--no-dev</span> <span class="hljs-string">--optimize-autoloader</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">audit</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">RunTests</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">php</span> <span class="hljs-string">artisan</span> <span class="hljs-string">test</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Deploy</span>
    <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">succeeded()</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">deployment:</span> <span class="hljs-string">DeployToProd</span>
        <span class="hljs-attr">environment:</span> <span class="hljs-string">'Production'</span>
        <span class="hljs-attr">strategy:</span>
          <span class="hljs-attr">runOnce:</span>
            <span class="hljs-attr">deploy:</span>
              <span class="hljs-attr">steps:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">echo</span> <span class="hljs-string">"Deploy seguro com aprovação manual"</span>
</div></code></pre>
<hr>
<p>Se quiser, posso montar um <code>azure-pipelines.yml</code> mais completo para seu projeto Laravel, com deploy para Azure Web App usando slots e chaves do Key Vault. Deseja isso?</p>
<h3 id="q4---cmo-devera-ser-o-azure-pipelinesyaml">Q4 - Cmo devera ser o <code>azure-pipelines.yaml</code></h3>
<blockquote>
<p>Monte um azure-pipelines.yml mais completo e explique bem cada etapa do arquivo</p>
</blockquote>
<p>Perfeito, Rafael! Abaixo está um exemplo bem estruturado de um arquivo <code>azure-pipelines.yml</code> completo para um <strong>projeto Laravel</strong> com:</p>
<ul>
<li><strong>Build seguro</strong></li>
<li><strong>Testes</strong></li>
<li><strong>Auditoria de dependências</strong></li>
<li><strong>Deploy com aprovação manual</strong></li>
<li><strong>Uso do Key Vault</strong></li>
<li><strong>Deploy com slot de staging</strong></li>
</ul>
<hr>
<p>🛠️ <code>azure-pipelines.yml</code> COMPLETO (comentado linha a linha)</p>
<pre class="hljs"><code><div><span class="hljs-attr">trigger:</span>
  <span class="hljs-attr">branches:</span>
    <span class="hljs-attr">include:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>  <span class="hljs-comment"># 🚨 Pipeline só dispara quando a branch 'main' sofre push.</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">LaravelSecrets</span>  <span class="hljs-comment"># 🔐 Grupo de variáveis (ex: chaves .env) protegidas via Azure Key Vault</span>

<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Build</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🔧 Etapa de Build e Auditoria'</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">ComposerAudit</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🛠️ Instalação de Dependências e Auditoria'</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">vmImage:</span> <span class="hljs-string">'ubuntu-latest'</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">UsePHPVersion@0</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">versionSpec:</span> <span class="hljs-string">'8.2'</span>
              <span class="hljs-attr">addToPath:</span> <span class="hljs-literal">true</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">checkout:</span> <span class="hljs-string">self</span>  <span class="hljs-comment"># 📦 Clona o código do repositório</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">|
              composer install --no-dev --optimize-autoloader
</span>            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'📦 Composer Install'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">composer</span> <span class="hljs-string">audit</span>
            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🔍 Composer Audit - Verificação de vulnerabilidades'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">PublishBuildArtifacts@1</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">pathToPublish:</span> <span class="hljs-string">'$(System.DefaultWorkingDirectory)'</span>
              <span class="hljs-attr">artifactName:</span> <span class="hljs-string">'laravel-artifacts'</span>
              <span class="hljs-attr">publishLocation:</span> <span class="hljs-string">'Container'</span>
            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'📤 Publicar artefato para próxima etapa'</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🧪 Etapa de Testes Automatizados'</span>
    <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">Build</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">succeeded()</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">job:</span> <span class="hljs-string">RunTests</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'▶️ PHPUnit Testes'</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">vmImage:</span> <span class="hljs-string">'ubuntu-latest'</span>
        <span class="hljs-attr">steps:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">DownloadBuildArtifacts@0</span>
            <span class="hljs-attr">inputs:</span>
              <span class="hljs-attr">artifactName:</span> <span class="hljs-string">'laravel-artifacts'</span>
              <span class="hljs-attr">downloadPath:</span> <span class="hljs-string">'$(System.DefaultWorkingDirectory)'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">|
              cp .env.pipelines .env  # 📝 Usa um .env próprio para testes
              php artisan key:generate
</span>            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'⚙️ Preparar .env e chave app'</span>

          <span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">php</span> <span class="hljs-string">artisan</span> <span class="hljs-string">test</span>
            <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🧪 Executar Testes com PHPUnit'</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">stage:</span> <span class="hljs-string">Deploy</span>
    <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🚀 Etapa de Deploy'</span>
    <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">Test</span>
    <span class="hljs-attr">condition:</span> <span class="hljs-string">succeeded()</span>
    <span class="hljs-attr">jobs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">deployment:</span> <span class="hljs-string">DeployToStaging</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'📦 Deploy para slot de staging'</span>
        <span class="hljs-attr">environment:</span> <span class="hljs-string">'production-staging'</span>  <span class="hljs-comment"># 🌍 Ambiente com aprovação manual no Azure DevOps</span>
        <span class="hljs-attr">strategy:</span>
          <span class="hljs-attr">runOnce:</span>
            <span class="hljs-attr">deploy:</span>
              <span class="hljs-attr">steps:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">AzureWebApp@1</span>
                  <span class="hljs-attr">inputs:</span>
                    <span class="hljs-attr">azureSubscription:</span> <span class="hljs-string">'MinhaConexaoAzure'</span>  <span class="hljs-comment"># 🔐 Nome do serviço de conexão com Azure</span>
                    <span class="hljs-attr">appName:</span> <span class="hljs-string">'meu-app-laravel'</span>              <span class="hljs-comment"># 🌐 Nome do App Service</span>
                    <span class="hljs-attr">deployToSlotOrASE:</span> <span class="hljs-literal">true</span>
                    <span class="hljs-attr">resourceGroupName:</span> <span class="hljs-string">'meu-grupo-rg'</span>
                    <span class="hljs-attr">slotName:</span> <span class="hljs-string">'staging'</span>                     <span class="hljs-comment"># 🎯 Slot de staging</span>
                    <span class="hljs-attr">package:</span> <span class="hljs-string">'$(Pipeline.Workspace)/laravel-artifacts'</span>
                  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🌐 Deploy para Azure App Service (staging)'</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">deployment:</span> <span class="hljs-string">SwapSlot</span>
        <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🔁 Promover staging para produção'</span>
        <span class="hljs-attr">environment:</span> <span class="hljs-string">'production'</span>  <span class="hljs-comment"># ⚠️ Ambiente real com nova aprovação</span>
        <span class="hljs-attr">dependsOn:</span> <span class="hljs-string">DeployToStaging</span>
        <span class="hljs-attr">strategy:</span>
          <span class="hljs-attr">runOnce:</span>
            <span class="hljs-attr">deploy:</span>
              <span class="hljs-attr">steps:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">AzureAppServiceManage@0</span>
                  <span class="hljs-attr">inputs:</span>
                    <span class="hljs-attr">azureSubscription:</span> <span class="hljs-string">'MinhaConexaoAzure'</span>
                    <span class="hljs-attr">Action:</span> <span class="hljs-string">'Swap Slots'</span>
                    <span class="hljs-attr">WebAppName:</span> <span class="hljs-string">'meu-app-laravel'</span>
                    <span class="hljs-attr">ResourceGroupName:</span> <span class="hljs-string">'meu-grupo-rg'</span>
                    <span class="hljs-attr">SourceSlot:</span> <span class="hljs-string">'staging'</span>
                    <span class="hljs-attr">TargetSlot:</span> <span class="hljs-string">'production'</span>
                  <span class="hljs-attr">displayName:</span> <span class="hljs-string">'🚀 Swap staging → produção'</span>
</div></code></pre>
<hr>
<p>🧠 EXPLICAÇÃO RESUMIDA POR BLOCOS</p>
<table>
<thead>
<tr>
<th>Bloco</th>
<th>Explicação</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trigger</code></td>
<td>Só inicia o pipeline com push na <code>main</code>.</td>
</tr>
<tr>
<td><code>variables</code></td>
<td>Carrega segredos do Key Vault, como <code>.env</code>, senhas etc.</td>
</tr>
<tr>
<td><code>Build</code></td>
<td>Instala as dependências via <code>composer</code>, faz auditoria de segurança e publica os arquivos como artefato.</td>
</tr>
<tr>
<td><code>Test</code></td>
<td>Baixa o artefato e executa <code>php artisan test</code> após configurar o ambiente <code>.env</code>.</td>
</tr>
<tr>
<td><code>DeployToStaging</code></td>
<td>Faz deploy em um <strong>slot de staging</strong>, com revisão ou aprovação manual habilitada (recomendado).</td>
</tr>
<tr>
<td><code>SwapSlot</code></td>
<td>Após a aprovação, troca os slots e promove staging para produção.</td>
</tr>
<tr>
<td><code>environments</code></td>
<td>Usado para aplicar <strong>checks manuais</strong>, escopos de variável, ou limitar quem pode fazer deploy.</td>
</tr>
</tbody>
</table>
<hr>
<p>🔒 Segurança e Integridade</p>
<ul>
<li>💼 <code>Azure Key Vault</code> garante que senhas/API keys não fiquem no código.</li>
<li>🔐 Slots protegem contra deploys diretos em produção.</li>
<li>✅ Auditoria de dependências (composer audit) impede que libs vulneráveis passem.</li>
<li>⚠️ <code>environment:</code> força <strong>aprovadores humanos</strong> antes de deploys críticos.</li>
</ul>
<hr>
<p>Se quiser, posso adaptar esse YAML para <strong>usar Docker</strong>, <strong>banco de dados MySQL/Azure SQL</strong>, ou incluir integração com <strong>tests no Cypress</strong>, por exemplo. Deseja expandir para algum desses cenários?</p>
<h2 id="q4---o-ataque-da-solar-wind">Q4 - O ataque da Solar Wind</h2>
<blockquote>
<p>Fale mais sobre o ataque do SolarWind e o relaicone ao A08 do OWASP</p>
</blockquote>
<p>O ataque à <strong>SolarWinds</strong> é um dos exemplos mais emblemáticos de falha de integridade de software — exatamente o que o OWASP classifica como <strong>A08:2021 – Software and Data Integrity Failures</strong>.</p>
<hr>
<p><strong>🕵️‍♂️ O que foi o ataque à SolarWinds?</strong></p>
<p>📌 Contexto</p>
<p>A SolarWinds é uma empresa que desenvolve software de monitoramento de infraestrutura, incluindo o <strong>Orion Platform</strong>, usado por milhares de organizações privadas e públicas, inclusive o governo dos EUA.</p>
<p>🎯 O que aconteceu?</p>
<p>Em 2020, invasores conseguiram <strong>inserir código malicioso</strong> diretamente no build do Orion (um tipo de &quot;backdoor&quot;), em uma das versões oficiais distribuídas aos clientes.</p>
<p>Esse código foi entregue como parte do <strong>update legítimo</strong> do software — ou seja, os próprios clientes instalaram a porta de entrada para o ataque acreditando estar apenas atualizando o sistema.</p>
<hr>
<p>🔍 Técnica usada: <strong>Ataque à Cadeia de Suprimentos (Supply Chain Attack)</strong></p>
<ul>
<li>Os atacantes <strong>invadiram a infraestrutura de CI/CD da SolarWinds</strong>.</li>
<li>Conseguiram <strong>alterar o pipeline de build</strong> para <strong>injetar um trojan (SUNBURST)</strong> dentro da DLL legítima.</li>
<li>O software foi <strong>assinado digitalmente</strong> pela própria SolarWinds, passando por todas as verificações de integridade locais dos clientes.</li>
</ul>
<hr>
<p><strong>⚠️ Relação com OWASP A08 – Software and Data Integrity Failures</strong></p>
<p>Essa categoria cobre falhas em que:</p>
<blockquote>
<p><em>“O código, a infraestrutura ou dados de uma aplicação podem ser comprometidos por falta de validação de integridade ou segurança na cadeia de fornecimento.”</em></p>
</blockquote>
<p>dA08 inclui riscos como:</p>
<ul>
<li>Deploy automático sem verificação.</li>
<li>Ausência de <strong>assinatura ou validação de artefatos</strong>.</li>
<li>Confiança excessiva em <strong>pacotes externos ou dependências</strong>.</li>
<li>Pipelines CI/CD <strong>mal protegidos</strong> (como no caso da SolarWinds).</li>
</ul>
<hr>
<p><strong>🛡️ O que podemos aprender com isso (boas práticas)</strong></p>
<p>CI/CD seguro:</p>
<ul>
<li><strong>Use controles de acesso rigorosos</strong> (RBAC) nos pipelines.</li>
<li><strong>Registre e monitore</strong> alterações em scripts de build e variáveis.</li>
<li><strong>Use revisão de código obrigatória</strong> para alterações em arquivos de pipeline (YAML, bash, Dockerfile).</li>
<li><strong>Assine digitalmente os artefatos</strong> e valide os hashes antes do deploy.</li>
</ul>
<p>Verificações:</p>
<ul>
<li>
<p>Verifique a <strong>integridade de dependências</strong> (<code>composer audit</code>, <code>npm audit</code>, etc).</p>
</li>
<li>
<p>Use ferramentas como:</p>
<ul>
<li><a href="https://slsa.dev/">SLSA (Supply chain Levels for Software Artifacts)</a></li>
<li><a href="https://sigstore.dev/">Sigstore / Cosign</a></li>
<li><a href="https://owasp.org/www-project-dependency-check/">OWASP Dependency-Check</a></li>
</ul>
</li>
</ul>
<hr>
<p>🧠 Conclusão</p>
<p>O ataque à SolarWinds mostrou que mesmo empresas com software confiável podem ser vetor de ataque quando há falhas de integridade no processo de build. Ele é um <strong>exemplo real e devastador</strong> do que o OWASP classifica como A08.</p>
<p>Quer que eu te mostre como aplicar algum desses controles (ex: auditoria de dependências ou validação de hash) no seu pipeline Azure DevOps para Laravel?</p>
<h2 id="an%C3%A1lise-do-perplexity">Análise do Perplexity</h2>
<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" class="logo" width="120"/>
<h1 id="a082021---falhas-de-integridade-de-software-e-dados-uma-an%C3%A1lise-aprofundada">A08:2021 - Falhas de Integridade de Software e Dados: Uma Análise Aprofundada</h1>
<p>Esta análise explora a categoria A08:2021 do OWASP Top 10, focada nas falhas de integridade de software e dados. Trata-se de uma vulnerabilidade crítica introduzida na lista de 2021 que aborda riscos relacionados a atualizações de software, dados críticos e pipelines de CI/CD que não verificam adequadamente a integridade. Os impactos dessas falhas podem ser devastadores, resultando em comprometimento de sistemas, execução de código malicioso e perda de confiança nos aplicativos afetados.</p>
<h2 id="contexto-e-defini%C3%A7%C3%A3o">Contexto e Definição</h2>
<p>As falhas de integridade de software e dados representam uma nova categoria no OWASP Top 10 de 2021, focando em vulnerabilidades que surgem quando componentes de software não verificados ou não confiáveis são introduzidos em sistemas. Esta categoria se concentra especificamente em suposições relacionadas a atualizações de software, dados críticos e pipelines de CI/CD sem a devida verificação de integridade<a href="https://owasp.org/Top10/">^1</a>.</p>
<p>De acordo com dados do OWASP, esta categoria está associada a 10 CWEs (Common Weakness Enumerations), apresenta uma taxa máxima de incidência de 16,67% e uma taxa média de incidência de 2,05%. O impacto médio ponderado é significativo em 7,94, tornando-a uma das categorias com maior impacto ponderado nos dados de CVE/CVSS<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<p>As falhas de integridade de software e dados referem-se a código e infraestrutura que não protegem contra violações de integridade. Estas ocorrem quando sistemas dependem de plugins, bibliotecas ou módulos de fontes não confiáveis, ou quando atualizações de software são baixadas sem verificação de integridade suficiente e aplicadas ao aplicativo anteriormente confiável<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="principais-vulnerabilidades-associadas">Principais Vulnerabilidades Associadas</h3>
<p>Entre as vulnerabilidades mais notáveis associadas a esta categoria estão:</p>
<ul>
<li><strong>CWE-829</strong>: Inclusão de Funcionalidade de Esfera de Controle Não Confiável</li>
<li><strong>CWE-494</strong>: Download de Código Sem Verificação de Integridade</li>
<li><strong>CWE-502</strong>: Desserialização de Dados Não Confiáveis<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a></li>
</ul>
<p>Estas fragilidades permitem que atacantes manipulem software ou dados, potencialmente levando ao controle não autorizado, violações de dados ou atividades maliciosas dentro dos aplicativos<a href="https://krishnag.ceo/blog/software-and-data-integrity-failures-a-critical-concern-for-developers/">^4</a>.</p>
<h2 id="causas-e-mecanismos-de-ataque">Causas e Mecanismos de Ataque</h2>
<h3 id="fontes-das-vulnerabilidades">Fontes das Vulnerabilidades</h3>
<p>As falhas de integridade de software e dados geralmente resultam de várias práticas inseguras:</p>
<ol>
<li><strong>Dependências não verificadas</strong>: Aplicações que dependem de plugins, bibliotecas ou módulos de fontes não confiáveis, repositórios ou redes de distribuição de conteúdo (CDNs)<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
<li><strong>Pipelines de CI/CD inseguros</strong>: Infraestruturas de integração e entrega contínuas com falhas de segurança podem introduzir potencial para acesso não autorizado, código malicioso ou comprometimento do sistema<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
<li><strong>Funcionalidade de atualização automática insegura</strong>: Aplicações que baixam atualizações sem verificação de integridade suficiente, permitindo que atacantes potencialmente distribuam suas próprias atualizações maliciosas<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
<li><strong>Desserialização insegura</strong>: Quando objetos ou dados são codificados ou serializados em uma estrutura que um atacante pode ver e modificar, tornando-os vulneráveis à desserialização insegura<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</li>
</ol>
<h3 id="ataques-%C3%A0-cadeia-de-suprimentos-de-software">Ataques à Cadeia de Suprimentos de Software</h3>
<p>Os ataques à cadeia de suprimentos de software tornaram-se particularmente alarmantes no contexto atual. Estes ocorrem quando atores maliciosos se infiltram em ecossistemas de software confiáveis, comprometendo dependências ou canais de distribuição<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^4</a>.</p>
<h2 id="cen%C3%A1rios-de-ataque-e-casos-reais">Cenários de Ataque e Casos Reais</h2>
<h3 id="cen%C3%A1rio-1-atualiza%C3%A7%C3%B5es-sem-assinatura">Cenário 1: Atualizações sem Assinatura</h3>
<p>Muitos roteadores domésticos, decodificadores, firmware de dispositivos e outros não verificam atualizações por meio de firmware assinado. Firmware não assinado é um alvo crescente para atacantes, representando uma preocupação maior quando não há mecanismo para remediar além de corrigir em uma versão futura<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="cen%C3%A1rio-2-ataque-solarwinds">Cenário 2: Ataque SolarWinds</h3>
<p>O ataque SolarWinds Orion é um exemplo notável de comprometimento de mecanismos de atualização. Mesmo com processos seguros de construção e integridade de atualização, a empresa teve estes subvertidos. Durante vários meses, a empresa distribuiu uma atualização maliciosa altamente direcionada para mais de 18.000 organizações, das quais cerca de 100 foram afetadas. Este é considerado um dos ataques mais abrangentes e significativos deste tipo na história<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="cen%C3%A1rio-3-desserializa%C3%A7%C3%A3o-insegura">Cenário 3: Desserialização Insegura</h3>
<p>Um aplicativo React que chama um conjunto de microserviços Spring Boot pode enfrentar vulnerabilidades quando os desenvolvedores tentam garantir que seu código seja imutável serializando o estado do usuário e passando-o de um lado para outro com cada solicitação. Um atacante que percebe a assinatura do objeto Java &quot;rO0&quot; (em base64) pode usar ferramentas como Java Serial Killer para obter execução remota de código no servidor da aplicação<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h2 id="impactos-e-consequ%C3%AAncias">Impactos e Consequências</h2>
<p>As falhas de integridade de software e dados podem ter consequências graves e de longo alcance:</p>
<h3 id="comprometimento-da-integridade-dos-dados">Comprometimento da Integridade dos Dados</h3>
<p>Atacantes podem alterar, manipular ou corromper dados críticos, resultando em informações imprecisas sendo armazenadas ou processadas. Isso compromete a confiabilidade do sistema, especialmente em setores onde a integridade dos dados é vital, como finanças, saúde e direito<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h3 id="execu%C3%A7%C3%A3o-de-c%C3%B3digo-malicioso">Execução de Código Malicioso</h3>
<p>A exploração de vulnerabilidades de software pode permitir que atacantes injetem código malicioso, levando à execução de comandos não autorizados. Isso pode causar comportamento imprevisível do sistema ou abrir backdoors para ataques adicionais<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h3 id="danos-%C3%A0-reputa%C3%A7%C3%A3o">Danos à Reputação</h3>
<p>Violações de dados ou integridade frequentemente corroem a confiança entre usuários, clientes e parceiros, prejudicando a reputação da organização. Isso pode levar à perda de lealdade do cliente e, em última análise, a oportunidades de negócios perdidas<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h3 id="consequ%C3%AAncias-financeiras">Consequências Financeiras</h3>
<p>Ataques à integridade de software e dados podem resultar em perdas financeiras significativas, incluindo multas por não conformidade e custos de recuperação<a href="https://community.f5.com/kb/technicalarticles/mitigating-owasp-web-app-risks-software-and-data-integrity-failures-using-big-ip/340228">^3</a>.</p>
<h2 id="m%C3%A9todos-de-preven%C3%A7%C3%A3o-e-mitiga%C3%A7%C3%A3o">Métodos de Prevenção e Mitigação</h2>
<h3 id="verifica%C3%A7%C3%A3o-de-integridade">Verificação de Integridade</h3>
<p>Use assinaturas digitais ou mecanismos similares para verificar se o software ou dados são da fonte esperada e não foram alterados<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="gest%C3%A3o-de-depend%C3%AAncias-seguras">Gestão de Dependências Seguras</h3>
<p>Garanta que bibliotecas e dependências, como npm ou Maven, estejam consumindo repositórios confiáveis. Se você tiver um perfil de risco mais alto, considere hospedar um repositório interno conhecido como confiável e verificado<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^1</a>.</p>
<h3 id="ferramentas-de-seguran%C3%A7a-da-cadeia-de-suprimentos">Ferramentas de Segurança da Cadeia de Suprimentos</h3>
<p>Utilize ferramentas de segurança da cadeia de suprimentos de software, como OWASP Dependency Check ou OWASP CycloneDX, para verificar se os componentes não contêm vulnerabilidades conhecidas<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h3 id="processos-de-revis%C3%A3o-de-c%C3%B3digo">Processos de Revisão de Código</h3>
<p>Implemente um processo de revisão para alterações de código e configuração para minimizar a chance de código malicioso ou configuração serem introduzidos em seu pipeline de software<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h3 id="segrega%C3%A7%C3%A3o-e-controle-de-acesso-no-cicd">Segregação e Controle de Acesso no CI/CD</h3>
<p>Garanta que seu pipeline de CI/CD tenha segregação adequada, configuração e controle de acesso para garantir a integridade do código fluindo através dos processos de construção e implantação<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h3 id="prote%C3%A7%C3%A3o-contra-desserializa%C3%A7%C3%A3o-insegura">Proteção contra Desserialização Insegura</h3>
<p>Certifique-se de que dados serializados não assinados ou não criptografados não sejam enviados para clientes não confiáveis sem alguma forma de verificação de integridade ou assinatura digital para detectar adulteração ou reprodução dos dados serializados<a href="https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/">^5</a>.</p>
<h2 id="melhores-pr%C3%A1ticas-de-seguran%C3%A7a">Melhores Práticas de Segurança</h2>
<h3 id="princ%C3%ADpios-de-seguran%C3%A7a-b%C3%A1sicos">Princípios de Segurança Básicos</h3>
<p>Adira aos princípios básicos de segurança de privilégios mínimos e separação de deveres, impondo autenticação multifator (MFA), rotação de credenciais e garantindo repositórios confiáveis para suas dependências<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^6</a>.</p>
<h3 id="seguran%C3%A7a-no-desenvolvimento">Segurança no Desenvolvimento</h3>
<p>Integre práticas de segurança em todo o ciclo de vida de desenvolvimento de software, incluindo:</p>
<ol>
<li>Análise estática de código fonte</li>
<li>Verificações de composição de software</li>
<li>Testes de segurança automatizados</li>
<li>Revisões de código com foco em segurança<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^6</a></li>
</ol>
<h3 id="seguran%C3%A7a-nos-ambientes-de-desenvolvimento">Segurança nos Ambientes de Desenvolvimento</h3>
<p>Proteja seus ambientes de desenvolvimento, sistemas de controle de versão e pipelines de CI/CD contra acesso não autorizado ou manipulação. Use ferramentas específicas para monitorar e verificar a integridade do código em todas as etapas<a href="https://cheatsheetseries.owasp.org/cheatsheets/Software_Supply_Chain_Security_Cheat_Sheet.html">^6</a>.</p>
<h2 id="conclus%C3%A3o">Conclusão</h2>
<p>As falhas de integridade de software e dados representam uma ameaça substancial e crescente no cenário atual de segurança cibernética. Com a crescente dependência de componentes de terceiros, atualizações automáticas e pipelines de CI/CD, a superfície de ataque para estas vulnerabilidades continua a se expandir.</p>
<p>A mitigação eficaz dessas falhas requer uma abordagem multifacetada, incluindo verificações rigorosas de integridade, gestão segura de dependências e processos robustos de revisão de código. Organizações devem adotar uma mentalidade de &quot;confiança zero&quot; em relação à integridade do software, verificando cada componente e atualização antes da integração.</p>
<p>À medida que ataques como o SolarWinds demonstram, até mesmo organizações com processos de segurança aparentemente sólidos podem ser comprometidas através da cadeia de suprimentos de software. Portanto, a vigilância contínua, a educação dos desenvolvedores e a implementação de controles de segurança em camadas são essenciais para proteger contra estas sofisticadas ameaças à integridade de software e dados.</p>
<div style="text-align: center">⁂</div>
<p>[^53]: https://opencre.org/node/standard/CWE/section/Inclusion of Functionality from Untrusted Control Sphere</p>

</body>
</html>
